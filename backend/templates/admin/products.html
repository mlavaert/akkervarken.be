<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Producten ¬∑ Akkervarken Admin</title>
  <link rel="stylesheet" href="/static/admin.css">
</head>
<body>
  <nav class="top-nav">
    <a href="/admin">Overzicht</a>
    <a href="/admin/orders">Bestellingen</a>
    <a href="/admin/products" class="active">Producten</a>
    <a href="/admin/batches">Batches</a>
  </nav>
  <div class="page">
    <header>
      <div>
        <h1>Producten</h1>
        <div class="meta">{{ products|length }} product{% if products|length != 1 %}en{% endif %}</div>
      </div>
      <div class="actions">
        <a class="btn primary" href="/admin/products/new">+ Nieuw product</a>
      </div>
    </header>

    {% if created or saved or deleted %}
      <div class="notice success">
        {% if created %}Nieuw product opgeslagen.{% endif %}
        {% if saved %}Wijzigingen bewaard.{% endif %}
        {% if deleted %}Product verwijderd.{% endif %}
      </div>
    {% endif %}

    {% if products %}
      <table>
        <thead>
          <tr>
            <th>Slug</th>
            <th>Naam</th>
            <th>Prijs</th>
            <th>Gewicht</th>
            <th>Verpakking</th>
            <th>Beschrijving</th>
            <th>Acties</th>
          </tr>
        </thead>
        <tbody>
          {% for product in products %}
            <tr>
              <td><span class="tag">{{ product.slug }}</span></td>
              <td><strong>{{ product.name }}</strong></td>
              <td style="white-space: nowrap;">‚Ç¨{{ '%.2f'|format(product.price) }}</td>
              <td>{{ product.weight_display }}</td>
              <td style="font-size: 12px;">
                {% if product.packaging_pieces %}
                  {{ product.packaging_pieces }} stuks
                  {% if product.unit_grams %}<br>¬±{{ product.unit_grams }}g/stuk{% endif %}
                {% else %}
                  ‚Äî
                {% endif %}
              </td>
              <td style="max-width: 400px;">
                {{ product.description }}
                {% if product.ingredients %}
                  <div style="margin-top: 6px; font-size: 12px; color: #777;">
                    <strong>Ingredi√´nten:</strong> {{ product.ingredients|truncate(100) }}
                  </div>
                {% endif %}
              </td>
              <td class="actions">
                <a class="icon-btn" href="/admin/products/{{ product.id }}/edit" title="Bewerk">
                  <span aria-hidden="true">‚úèÔ∏é</span>
                  <span class="sr-only">Bewerken</span>
                </a>
                <form id="delete-{{ product.id }}" method="post" action="/admin/products/{{ product.id }}/delete" onsubmit="return confirm('Zeker weten dat je dit product wil verwijderen?');"></form>
                <button type="submit" class="icon-btn danger" form="delete-{{ product.id }}" title="Verwijder">
                  <span aria-hidden="true">üóë</span>
                  <span class="sr-only">Verwijderen</span>
                </button>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <div class="notice info">Nog geen producten in de database.</div>
    {% endif %}
  </div>
</body>
</html>
